<!-- use icons defined in icons.html -->
{% macro icon(action) -%}
  <svg class="icon" viewBox="0 0 24 24" width="24px" height="24px">
    <use href="#{{ action }}" xlink:href="#{{ action }}"></use>
  </svg>
{%- endmacro %}

<!-- Search bar base -->
{% macro search_bar(value="", inline=false, rtl=false) -%}
    <form method="{{ method or 'POST' }}" action="{{ url_for('index') }}" id="search_form" {% if inline %}class="inline-search" {% endif %} role="search">
        <div id="search_input_container" {% if rtl -%} class="rtl" {%- endif %}>
            {% if inline %}
            <a href="{{ url_for('index') }}" id="logo_link"><img src="{{ url_for('static', filename='themes/eelo/img/logo.png') }}" alt="" id="logo"></a>
            {% endif %}
            <input type="search" name="q" class="form-control" id="q" placeholder="{{ _('Search for...') }}" autocomplete="off" value="{{ value }}">
            <button type="submit">{{ icon('search') }}</button>
        </div>
        
        {{ caller() }}
    </form><!-- / #search_form_full -->
{%- endmacro %}


<!-- Draw favicon -->
{% macro draw_favicon(favicon) -%}
    <img width="32" height="32" class="favicon" src="{{ url_for('static', filename='themes/eelo/img/icons/' + favicon + '.png') }}" alt="{{ favicon }}" />
{%- endmacro %}

{%- macro result_link(url, title, classes='') -%}
<a href="{{ url }}" {% if classes %}class="{{ classes }}" {% endif %}{% if results_on_new_tab %}target="_blank" rel="noopener noreferrer"{% else %}rel="noreferrer"{% endif %}>{{ title }}</a>
{%- endmacro -%}

<!-- Draw result header -->
{% macro result_header(result, favicons) -%}
<h4 class="result_header">{% if result.engine~".png" in favicons %}{{ draw_favicon(result.engine) }} {% endif %}{{ result_link(result.url, result.title|safe) }}</h4>
{%- endmacro %}

<!-- Draw result sub header -->
{% macro result_sub_header(result) -%}
    {% if result.publishedDate %}<time class="text-muted" datetime="{{ result.pubdate }}" >{{ result.publishedDate }}</time>{% endif %}
    {% if result.magnetlink %}<small> &bull; {{ result_link(result.magnetlink, icon('magnet') + _('magnet link'), "magnetlink") }}</small>{% endif %}
    {% if result.torrentfile %}<small> &bull; {{ result_link(result.torrentfile, icon('download-alt') + _('torrent file'), "torrentfile") }}</small>{% endif %}
{%- endmacro %}

<!-- Draw result footer -->
{% macro result_footer(result) -%}

<div class="external-link">{{ result.pretty_url }}</div>
{%- endmacro %}

<!-- Draw result footer -->
{% macro result_footer_rtl(result) -%}
    <div class="clearfix"></div>
    {% for engine in result.engines %}
        <span class="label label-default">{{ engine }}</span>
    {% endfor %}
    <small>{{ result_link("https://web.archive.org/web/" + result.url, icon('link') + _('cached'), "text-info") }}</small>
    {% if proxify %}
    <small>{{ result_link(proxify(result.url), icon('sort') + _('proxied'), "text-info") }}</small>
    {% endif %}
    <div class="external-link">{{ result.pretty_url }}</div>
{%- endmacro %}

{% macro checkbox_toggle(id, blocked) -%}
    <input type="checkbox" id="{{ id }}" name="{{ id }}"{% if blocked %} checked="checked"{% endif %} class="onoffswitch-checkbox">
{%- endmacro %}

{% macro support_toggle(supports) -%}
    {% if supports %}
    <span class="label label-success">
        {{ _("supported") }}
    </span>
    {% else %}
    <span class="label label-danger">
        {{ _("not supported") }}
    </span>
    {% endif %}
{%- endmacro %}
